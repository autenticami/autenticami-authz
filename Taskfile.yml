version: '3'

tasks:
  proto:
    cmds:
      - protoc cmd/pdp_agent/api/v1/*.proto --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative --proto_path=.
  build:
    cmds:
      - go mod download
      - go build -o autenticami ./cmd/pdp_agent
    silent: true
  hot:
    cmds:
      - air --build.cmd "go build -o bin/pdp_agent ./cmd/pdp_agent/main.go" --build.bin "./bin/pdp_agent"
  test:
    cmds:
      - make coverage
    silent: true
